function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}const axios=require('axios');class Jenkins{constructor(a,b,c={}){this.token=b,this.baseUrl=`http://${a}:${b}@jenkins.pimpam.io:19080`,this.urlParams={token:b},this.headers=Object.assign({},{Authorization:this.urlParams.token},c),this.crumb=null}getCrumb(){var a=this;return _asyncToGenerator(function*(){const b=`${a.baseUrl}/crumbIssuer/api/json`;try{const c=yield axios.get(b,a.headers),d=c.data;return a.crumb=d,d}catch(a){return a.statusText}})()}info(){var a=this;return _asyncToGenerator(function*(){const b=`${a.baseUrl}/api/json`,c=a.crumb||(yield a.getCrumb()),d=Object.assign({},a.headers,{[c.crumbRequestField]:c.crumb}),e=yield axios.get(b,{headers:d});return e.data})()}toString(){return`<Jenkins ${this.token}>`}}module.exports=Jenkins;
